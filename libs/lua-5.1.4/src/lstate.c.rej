***************
*** 93,99 ****
    resethookcount(L);
    L->openupval = NULL;
    L->size_ci = 0;
-   L->nCcalls = L->baseCcalls = 0;
    L->status = 0;
    L->base_ci = L->ci = NULL;
    L->savedpc = NULL;
--- 93,99 ----
    resethookcount(L);
    L->openupval = NULL;
    L->size_ci = 0;
+   L->nCcalls = 0;
    L->status = 0;
    L->base_ci = L->ci = NULL;
    L->savedpc = NULL;
***************
*** 205,211 ****
    do {  /* repeat until no more errors */
      L->ci = L->base_ci;
      L->base = L->top = L->ci->base;
-     L->nCcalls = L->baseCcalls = 0;
    } while (luaD_rawrunprotected(L, callallgcTM, NULL) != 0);
    lua_assert(G(L)->tmudata == NULL);
    luai_userstateclose(L);
--- 205,211 ----
    do {  /* repeat until no more errors */
      L->ci = L->base_ci;
      L->base = L->top = L->ci->base;
+     L->nCcalls = 0;
    } while (luaD_rawrunprotected(L, callallgcTM, NULL) != 0);
    lua_assert(G(L)->tmudata == NULL);
    luai_userstateclose(L);
